@model List<LogItemViewModel>

@{
    ViewData["Title"] = "Manual Log";
}

<h2 class="text-2xl">Manual Log</h2>

<form asp-action="Upload" enctype="multipart/form-data" method="post">
    <input type="file" name="file" itemtype="csv"/>
    <input class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded" type="submit" value="Upload"/>
</form>

@if (Model?.Count > 0)
{
    <input id="deviceSerialNumber" hidden value="@Model[0].DeviceSerialNo"/>
    <form asp-action="Save" method="post">
        <table id="logTable" class="table-auto w-full mt-5">
            <thead>
            <tr>
                <th>No.</th>
                <th>@Html.DisplayNameFor(m => m[0].DeviceSerialNo)</th>
                <th>@Html.DisplayNameFor(m => m[0].EnergyUsage)</th>
                <th>@Html.DisplayNameFor(m => m[0].Interval)</th>
                <th>@Html.DisplayNameFor(m => m[0].LoggedDate)</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            @{ var index = 1;}
            @foreach (var log in Model)
            {
                <tr>
                    <td>@index</td>
                    <td class="serial-no text-center">@log.DeviceSerialNo</td>
                    <td><input class="energy shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="number" value="@log.EnergyUsage" required/></td>
                    <td><input class="interval shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="number" value="@log.Interval" required/></td>
                    <td><input class="logged-date shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" type="text" value="@log.LoggedDate" required/></td>
                    <td><button type="button" class="delete btn btn-close bg-red-500" data-index="@(index++)">Delete</button></td>
                </tr>
            }
            </tbody>
        </table>
        <div class="flex justify-between">
            <input type="submit" id="btnSave" value="Save" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded align-end">
            <button type="button" id="btnAdd" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Add</button>
        </div>
    </form>
}

@section Scripts
{
    <script src="~/js/manualLogExample.js"></script>
}